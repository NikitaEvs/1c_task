# 1C entrance task

[![unit_tests](https://github.com/NikitaEvs/1c_task/actions/workflows/test.yml/badge.svg)](https://github.com/NikitaEvs/1c_task/actions/workflows/test.yml)

---

## Суть решения
Данный алгоритм использует идею жадных алгоритмов. Изначально мы "нормализуем" наши колоды, т. е. преобразуем
последовательности карт, которые находятся в правильном порядке в "цепи". В дальнейшем мы будем переставлять их вместе.
Далее на каждом шаге мы ищем такую перстановку "цепи", чтобы верхняя карта в ней была минимальная по масти. 
В случае пустой колоды мы совершаем перестановку, т. к. это позволяет убрать ряд крайних случаев. Такой алгоритм, конечно,
не всегда находит правильный результат, но в этой задаче ничего кроме полного перебора найти такой результат не сможет.

## Как запустить
Компиляция только основного модуля
```shell
mkdir build
cd build
cmake ..
make
```

Далее можно запустить главный модуль
```shell
cd build
./main ../data/true.json
```
Где ../data/true.json - путь до файла с исходными колодами (можно посмотреть пример синтаксиса в папке data).

Доступны следующие опции компиляции:
* ```-DTEST_BUILD=ON``` - сборка с тестами вместе с библиотекой googletest 
  (необходимо интернет соединение)
* ```-DUBSAN_SANITIZE_BUILD=ON``` - сборка с UndefinedBehaviour sanitizer
* ```-DASAN_SANITIZE_BUILD=ON``` - сборка с Address sanitizer
* ```-DCHECK_COVERAGE=ON``` - сборка вместе с gcov для просмотра покрытия тестами

Запуск тестов можно сделать с помощью
```shell
cd build/test
./unit_test
```

## CI
Для проекта настроено две цели в GitHub Actions:
* `unit_tests` - запуск тестов 
* `docs` - генерация документации с помощью Doxygen и автоматический deploy в ветку
`gh-pages`. Документацию можно увидеть на странице GitHub Pages репозитория. К сожалению, написать комментарии
  ко всем функциям не успел.
